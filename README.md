# simple-pygame-game

Перед запуском игры:

    pip install -r requirements.txt

Простейшая имитация природной среды с находящимися в ней животными, растениями и предметами.

Структура игры:
В игре присутствуют четыре базовых класса, отвечающих за логику игры:
Field - класс, содержащий в себе информацию о текущей ситуации на игровом поле (Список сущностей, находящихся на поле на данный момент, цвет фона, размеры поля и пр.)
Timestamp - класс, позволяющий сохранять в памяти метки времени для того, чтобы зафиксировать время совершения какого-либо события (с целью в дальнейшем вычислить время, прошедшее с момента совершения события и пр.) 
Vector - класс для работы с геометрией векторов в двумерном пространстве
Unit - класс, определяющий возможные действия юнитов (передвижение, поедание пищи, атака) и их характеристики (размер, цвет, количество энергии, скорость, сила, здоровье и пр.)
Item - класс, определяющий логику различных предметов на игровом поле
Food - класс, позволяющий добавлять на игровое поле различную еду

В трех последних базовых классах описывается лишь "функционал" сущностей соответствущих типов. Поведение же задаётся отдельно для каждой разновидности сущности и опиысывается в подклассах базовых классов. Например, индивидуальное поведенеие мирного юнита описывается в классе Civilian, который наследует методы класса Unit.

Также присутствует класс Window, содержащий методы для управления появляющимся при запуске игры окном, для обработки событий окна (например, нажатие на кнопку закрытия окна в операционной системе)

Точка входа - файл main.py

Небольшое описание каждой сущности, появляющейся на поле:
Растение (Plant): разновидность еды (Food), появляется в произвольно выбранной позиции на поле раз в определённый промежуток времени.
Яйцо (Egg): разновидность объектов (Item), откладывается юнитами; по истечении определённого времени уничтожается, спавня вместо себя юнита, подобного родителю.
Мирный юнит (Civilian): разновидность юнитов (Unit), питается растениями и убегает от агрессивных юнитов; по возможности обороняется от агрессивных юнитов ответными атаками; при победе в схватке с агрессивным юнитом съедает его; если энергии больше определенного количества - откладывает яйцо; при полном окончании энергии погибает.
Агрессивный юнит (Agressor): разновидность юнитов (Unit), атакует мирных юнитов и питается только ими, в остальном поведение не отличается от поведения мирного юнита; превосходит мирного юнита по многим характеристикам, но плодится медленнее.

Игра выполняется пошагово, за секунду успевает проходить большое количество шагов. На каждом шаге каждая сущность на игровом поле как-либо изменяет своё состояние в зависимости от текущей ситуации на игрвоом поле.

Принцип передвижения юнитов:
Юниты перемещаются по полю по векторам. Как построить для себя наиболее оптимальный вектор для перемещения - каждый юнит решает сам на каждом очередном шаге. Для этого в игру была добавлена такая характеристика, как поле зрения юнитов. Если в поле зрения появляется какая-либо сущность, к ней (или в противоположном направлении) строится вектор. Если сущностей в поле зрения несколько, итоговый вектор движения получается при помощи сложения всех построенных на данном шаге векторов. Таким образом юнит может, например, одноврменно приближаться к еде и отдаляться от противника.

Пример:

![alt text](https://i.ibb.co/gD85ydz/image.png)

Красный юнит - враг, красный вектор - вектор, отдаляющий от этого врага.
Зеленая сущность - еда, зеленый вектор - вектор, приближающий вектора к этой еде.
Желтый вектор - сумма красного и зеленого векторов - итоговый вектор движения.


Некоторые детали (нормализация векторов, умножение нормализованных векторов на некоторые коэффициенты) в описании прницпа опущены.
